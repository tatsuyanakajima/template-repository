name: Initialize New Repository

# このワークフローは、新しいリポジトリに初めてプッシュされたときにトリガーされます
on:
  push:
    # masterブランチに対する初めてのプッシュをトリガーとします
    branches:
      - master
    paths-ignore:
      - '.gitignore'
      - 'README.md'

jobs:
  setup:
    runs-on: ubuntu-latest

    steps:
    - name: Check out the repository
      uses: actions/checkout@v2

    - name: Add .gitignore
      run: |
        echo "*.log" > .gitignore
        echo "node_modules/" >> .gitignore

    - name: Add README.md
      run: |
        echo "# My New Repository" > README.md
        echo "This is an automatically generated README for my new repository." >> README.md

    - name: Push changes
      run: |
        git config user.name "tatsuyanakajima"
        git config user.email "tatsuya.nakajima@acti0m.com"
        git add .gitignore README.md
        git commit -m "Initialize repository with .gitignore and README.md"
        git push